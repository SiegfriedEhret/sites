---
import StoryblokComponent from "@storyblok/astro/StoryblokComponent.astro";
import Layout from "../layouts/Layout.astro";
import { getAllNotes } from "@packages/utils/storyblok";

export async function getStaticPaths() {
  return (
    await getAllNotes({
      language: "en",
      page: 1,
      token: import.meta.env.STORYBLOK_TOKEN,
    })
  ).map((story) => ({
    params: { slug: story.slug },
    props: { story },
  }));
}

const { slug } = Astro.params;
const { story } = Astro.props;
---

<Layout>
  <StoryblokComponent blok={story.content} story={story} />
</Layout>
