---
import { Image } from "astro:assets";
const { url, title, maxHeight = "auto", fit = "contain" } = Astro.props;
---

<figure class:list={{ contain: fit === "contain", cover: fit === "cover" }}>
  {
    typeof url === "string" ? (
      <img src={url} alt={title} />
    ) : (
      <Image src={url} alt={title} />
    )
  }
  <figcaption>{title}</figcaption>
</figure>

<style define:vars={{ maxHeight }}>
  figure {
    margin: 0 0 var(--babase);
  }
  figure.contain img {
    object-fit: contain;
  }
  figure.cover img {
    object-fit: cover;
  }
  img {
    display: block;
    margin-inline: auto;
    max-width: 100%;
    width: 100%;
    max-height: var(--maxHeight);
    height: auto;
  }
  figcaption {
    text-align: center;
    text-wrap: balance;
    margin: 0 auto;
  }
</style>
